(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(3771)}])},1204:function(e,n,t){"use strict";t.d(n,{Z:function(){return x}});var r=t(5893),o=t(1584),i=t.n(o),s=t(9356),a=t(5675),l=t.n(a),c=t(1664),d=t.n(c),u=t(7294),h=t(2729),_=t(3429);function g(){let e=(0,h._)(["\n  margin: 0 4px;\n  padding: 10px;\n  font-size: 0.5rem;\n  border: 1px solid hsl(0, 0%, 87%);\n  border-radius: 5px;\n  width: 30px;\n  height: 15px;\n  cursor: pointer;\n  &:hover {\n    box-shadow: 2px 2px 2px hsl(0, 0%, 87%);\n"]);return g=function(){return e},e}function m(){let e=(0,h._)(['\n  font-family: "Source Code Pro", monospace;\n  font-size: 0.8rem;\n  color: #000000;\n  background-color: #f3f3f3;\n  height: 2.7rem;\n  width: 6.5rem;\n']);return m=function(){return e},e}_.ZP.button(g());let f=_.ZP.button(m());function x(){let[e,n]=(0,u.useState)("light"),t=e=>{console.log("click button "+e),n(e)};return(0,r.jsxs)("header",{className:"".concat("light"===e?i().light_header:i().dark_header),children:[(0,r.jsx)("div",{children:(0,r.jsx)(d(),{href:"/",children:(0,r.jsx)(l(),{className:"".concat("light"===e?i().logo_light:i().logo_dark),src:"/physics.svg",alt:"Physics in the Browser Logo",width:50,height:50,priority:!0})})}),(0,r.jsx)("div",{className:i().description,children:"Physics in the Browser"}),(0,r.jsxs)("nav",{className:i().nav,children:[(0,r.jsx)(d(),{href:"/#",children:(0,r.jsx)(s.ZP,{type:"primary",className:i().btn,children:"Simulations"})}),(0,r.jsx)(d(),{href:"/about",children:(0,r.jsx)(s.ZP,{type:"primary",className:i().btn,children:"About"})}),(0,r.jsx)("div",{children:(0,r.jsx)(f,{className:i().setting_btn,children:"Settings"})}),(0,r.jsx)("button",{className:i().theme_btn,onClick:()=>{t("light")},children:"Light"}),(0,r.jsx)("button",{className:i().theme_btn,onClick:()=>{t("dark")},children:"Dark"})]})]})}},2097:function(e,n,t){"use strict";t.d(n,{H:function(){return c},W:function(){return a}});var r=t(5893),o=t(9477),i=t(5078),s=t(7294);class a{constructor(){this.densityLowColour=new o.Color("blue"),this.densityHighColour=new o.Color("red")}}function l(e){return new o.Vector3(e.r,e.g,e.b)}function c(e){let n=(0,s.useRef)(null),t=(0,s.useMemo)(()=>{let n={segX:"31.0",segY:"31.0",width:"10.0",height:"8.0",segXInt:"32",segArea:"1024",densityRangeLow:"0.0",densityRangeHigh:"10.0",densityRangeSize:"10.0"},t=new o.ShaderMaterial;t.vertexShader="// VERTEX SHADER\r\nvarying lowp vec4 vColor;\r\n\r\nuniform float density[${segArea}]; //the size of one chunk \r\nuniform vec3 hiCol; \r\nuniform vec3 lowCol;\r\n\r\nint getIndexFromPoint(vec3 pos)\r\n{\r\n  int ix = int((pos.x + (${width} / 2.0)) * ${segX} / ${width});\r\n  int iy = int((-pos.y + (${height} / 2.0)) * ${segY} / ${height});\r\n  return (ix + iy * ${segXInt});\r\n}\r\n\r\nvec4 getColourFromDensity(float density)\r\n{\r\n  density = min(density, ${densityRangeHigh});\r\n  density = max(density, ${densityRangeLow});\r\n  density = density / ${densityRangeSize};\r\n  return vec4(mix(lowCol, hiCol, density), 1.0);\r\n}\r\n\r\nvoid main(void) \r\n{\r\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n  int index = getIndexFromPoint(position);\r\n  vColor = getColourFromDensity(density[index]);\r\n}\r\n".replace(/\$\{(\w+?)\}/g,function(e,t){return void 0!==n[t]?n[t]:"1.0"}),t.fragmentShader="// FRAGMENT SHADER\r\nvarying lowp vec4 vColor;\r\n\r\nvoid main(void) {\r\n  gl_FragColor = vColor;\r\n}\r\n";let r=new Float32Array(Array(1024).fill(1));return t.uniforms={density:{value:r},hiCol:{value:l(e.params.densityHighColour)},lowCol:{value:l(e.params.densityLowColour)}},t},[e.params.densityHighColour,e.params.densityLowColour]);(0,i.A)(e=>{e.camera.setRotationFromAxisAngle(new o.Vector3(1,0,0),-Math.PI/2),n.current.lookAt(0,99,0)});let{worker:a}=e;(0,s.useEffect)(()=>{(async()=>{a.postMessage({func:"init"}),a.onmessage=e=>{switch(e.data.type){case"init":console.log("starting"),a.postMessage({func:"start"});break;case"output":(function(e){console.log(e);let n=new Float32Array(e.length/4);for(let t=0;t<32;t++)for(let r=0;r<32;r++)n[32*t+r]=e[64*t+2*r];t.uniforms.density.value=n,t.uniformsNeedUpdate=!0})(e.data.density)}},a.onerror=e=>{console.log(e)},console.log("worker created",a)})()},[t,a]);let{disableInteraction:c}=e,d=!1,u=!1,h=new o.Vector2(0,0),_=new o.Vector2(0,0),g=e=>{null!=e.uv&&(d=!1,u=!0,h.set(e.uv.x,1-e.uv.y))},m=e=>{u&&null!=e.uv&&(d=!0,_.set(e.uv.x,1-e.uv.y))},f=e=>{d=!1,u=!1},x=new o.Vector2(32,32);return setInterval(()=>{if(c||!d)return;let e=(new o.Vector2).subVectors(_,h).multiplyScalar(100),n=(new o.Vector2).add(_).multiply(x).round();h.set(_.x,_.y),d=!1,console.log("[event] Applying force",e,"at",n),a.postMessage({func:"updateForce",args:{loc:n,forceDelta:e}})},1e3/30),(0,r.jsx)("mesh",{...e,ref:n,material:t,onPointerUp:f,onPointerDown:g,onPointerMove:m,children:(0,r.jsx)("planeGeometry",{args:[10,8,31,31]})})}},3771:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return F}});var r=t(2729),o=t(5893),i=t(9008),s=t.n(i),a=t(9034),l=t.n(a),c=t(1204),d=t(3429),u=t(6713),h=t(6277),_=t(6074),g=t(6226),m=t(6819),f=t(7294),x=t(9477);function p(){let e=(0,r._)(["\n  background-color: #d3d3d3;\n  color: #000000;\n  width: 20rem;\n  height: calc(100% - 5rem);\n  border-right: 2px solid #808080;\n  font-size: 2rem;\n  min-height: 90%;\n  position: absolute;\n  display: flex;\n"]);return p=function(){return e},e}function v(){let e=(0,r._)(['\n  font-family: "Roboto", sans-serif;\n  font-size: 1.4rem;\n']);return v=function(){return e},e}let y=(0,d.ZP)(u.Z)(p()),w=d.ZP.span(v());function b(e){let[n,t]=(0,f.useState)("#0000FF"),[r,i]=(0,f.useState)("#FF0000"),s=e.setParams,a=(0,f.useMemo)(()=>"string"==typeof n?n:n.toHexString(),[n]),l=(0,f.useMemo)(()=>"string"==typeof r?r:r.toHexString(),[r]);return(0,f.useEffect)(()=>{s(e=>({...e,densityLowColour:new x.Color(a),densityHighColour:new x.Color(l)}))},[a,l,s]),(0,o.jsxs)(y,{direction:"vertical",size:["large","small"],children:[(0,o.jsx)(h.Z,{justify:"center"}),(0,o.jsx)(h.Z,{justify:"center",children:(0,o.jsx)(w,{children:"Parameters"})}),(0,o.jsx)(_.Z,{orientation:"left",children:"Simulator Color"}),(0,o.jsxs)(h.Z,{justify:"space-around",children:[(0,o.jsx)(g.Z,{style:{textAlign:"center"},children:(0,o.jsx)("span",{children:"Low"})}),(0,o.jsx)(g.Z,{children:(0,o.jsx)(m.Z,{value:n,onChange:t})})]}),(0,o.jsxs)(h.Z,{justify:"space-around",children:[(0,o.jsx)(g.Z,{children:(0,o.jsx)("span",{children:"High"})}),(0,o.jsx)(g.Z,{children:(0,o.jsx)(m.Z,{value:r,onChange:i})})]}),(0,o.jsx)(_.Z,{})]})}var j=t(5029),C=t(2097);function k(){let e=(0,r._)(["\n  position: absolute;\n  left: 21rem;\n  top: 6rem;\n  width: calc(100vw - 22rem);\n  height: calc(100vh - 7rem);\n"]);return k=function(){return e},e}function H(){let e=(0,r._)(["\n  background: transparent;\n"]);return H=function(){return e},e}function N(){let e=(0,r._)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  background: transparent;\n"]);return N=function(){return e},e}let P=d.ZP.div(k()),Z=(0,d.ZP)(j.Xz)(H()),S=d.ZP.main(N());function F(){let[e,n]=(0,f.useState)(new C.W),[r,i]=(0,f.useState)(null);return(0,f.useEffect)(()=>{let e=new Worker(t.tu(new URL(t.p+t.u(868),t.b)),{type:void 0});i(e)},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s(),{children:[(0,o.jsx)("title",{children:"Physics in the Browser for the People"}),(0,o.jsx)("meta",{name:"description",content:"PHYS"}),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsxs)(S,{children:[(0,o.jsx)("div",{className:l().navBar,children:(0,o.jsx)(c.Z,{})}),(0,o.jsx)(b,{params:e,setParams:n}),(0,o.jsx)(P,{children:(0,o.jsxs)(Z,{shadows:!0,camera:{position:[1,10,1]},children:[(0,o.jsx)("ambientLight",{}),(0,o.jsx)(C.H,{disableInteraction:!1,position:[0,0,0],params:e,worker:r})]})})]})]})}},9034:function(e){e.exports={main:"Home_main__nLjiQ",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",center:"Home_center__4BFgC",logo:"Home_logo__27_tb",thirteen:"Home_thirteen__cMI_k",rotate:"Home_rotate____XsI",navBar:"Home_navBar__DtDJB",content:"Home_content__Zy02X",vercelLogo:"Home_vercelLogo__dtSk9",scene:"Home_scene__X8N8q",canvas:"Home_canvas__x616u",body:"Home_body__XYSzx"}},1584:function(e){e.exports={header:"Navbar_header__VcZdC",light_header:"Navbar_light_header__WALT5",dark_header:"Navbar_dark_header__CITUf",nav:"Navbar_nav__b3Hnv","nav-btn":"Navbar_nav-btn__yDFgQ",btn:"Navbar_btn__2_IOi",setting_btn:"Navbar_setting_btn__Uc9Wm",theme_btn:"Navbar_theme_btn__bnQWn",logo:"Navbar_logo__E_Sw_",logo_light:"Navbar_logo_light__ci8VM",logo_dark:"Navbar_logo_dark__lEPkd",description:"Navbar_description__tDaFB"}}},function(e){e.O(0,[737,819,29,923,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);