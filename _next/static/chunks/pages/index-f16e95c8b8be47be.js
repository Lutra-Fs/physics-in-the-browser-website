(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(3771)}])},3419:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(5893),o=t(1584),i=t.n(o),s=t(8872),a=t(5675),c=t.n(a),l=t(1664),d=t.n(l);function u(){return(0,r.jsxs)("header",{className:i().header,children:[(0,r.jsx)("div",{children:(0,r.jsx)(d(),{href:"/",children:(0,r.jsx)(c(),{className:i().logo,src:"/physics.svg",alt:"Physics in the Browser Logo",width:50,height:50,priority:!0})})}),(0,r.jsx)("div",{className:i().description,children:"Physics in the Browser"}),(0,r.jsxs)("nav",{className:i().nav,children:[(0,r.jsx)(d(),{href:"/#",children:(0,r.jsx)(s.ZP,{type:"primary",className:i().btn,children:"Simulations"})}),(0,r.jsx)(d(),{href:"/about",children:(0,r.jsx)(s.ZP,{type:"primary",className:i().btn,children:"About"})}),(0,r.jsx)(d(),{href:"/#",children:(0,r.jsx)(s.ZP,{type:"primary",className:i().theme_btn,children:"THEMEs"})}),(0,r.jsx)(d(),{href:"/#",children:(0,r.jsx)(s.ZP,{type:"primary",className:i().theme_btn,children:"Night Mode"})})]})]})}},2097:function(e,n,t){"use strict";t.d(n,{H:function(){return l},W:function(){return a}});var r=t(5893),o=t(9477),i=t(5078),s=t(7294);class a{constructor(){this.densityLowColour=new o.Color("blue"),this.densityHighColour=new o.Color("red")}}function c(e){return new o.Vector3(e.r,e.g,e.b)}function l(e){let n=(0,s.useRef)(null),t=(0,s.useMemo)(()=>{let n={segX:"31.0",segY:"31.0",width:"10.0",height:"8.0",segXInt:"32",segArea:"1024",densityRangeLow:"0.0",densityRangeHigh:"10.0",densityRangeSize:"10.0"},t=new o.ShaderMaterial;t.vertexShader="// VERTEX SHADER\r\nvarying lowp vec4 vColor;\r\n\r\nuniform float density[${segArea}]; //the size of one chunk \r\nuniform vec3 hiCol; \r\nuniform vec3 lowCol;\r\n\r\nint getIndexFromPoint(vec3 pos)\r\n{\r\n  int ix = int((pos.x + (${width} / 2.0)) * ${segX} / ${width});\r\n  int iy = int((-pos.y + (${height} / 2.0)) * ${segY} / ${height});\r\n  return (ix + iy * ${segXInt});\r\n}\r\n\r\nvec4 getColourFromDensity(float density)\r\n{\r\n  density = min(density, ${densityRangeHigh});\r\n  density = max(density, ${densityRangeLow});\r\n  density = density / ${densityRangeSize};\r\n  return vec4(mix(lowCol, hiCol, density), 1.0);\r\n}\r\n\r\nvoid main(void) \r\n{\r\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n  int index = getIndexFromPoint(position);\r\n  vColor = getColourFromDensity(density[index]);\r\n}\r\n".replace(/\$\{(\w+?)\}/g,function(e,t){return void 0!==n[t]?n[t]:"1.0"}),t.fragmentShader="// FRAGMENT SHADER\r\nvarying lowp vec4 vColor;\r\n\r\nvoid main(void) {\r\n  gl_FragColor = vColor;\r\n}\r\n";let r=new Float32Array(Array(1024).fill(1));return t.uniforms={density:{value:r},hiCol:{value:c(e.params.densityHighColour)},lowCol:{value:c(e.params.densityLowColour)}},t},[e.params.densityHighColour,e.params.densityLowColour]);(0,i.A)(e=>{e.camera.setRotationFromAxisAngle(new o.Vector3(1,0,0),-Math.PI/2),n.current.lookAt(0,99,0)});let{worker:a}=e;(0,s.useEffect)(()=>{(async()=>{a.postMessage({func:"init"}),a.onmessage=e=>{switch(e.data.type){case"init":console.log("starting"),a.postMessage({func:"start"});break;case"output":(function(e){console.log(e);let n=new Float32Array(e.length/4);for(let t=0;t<32;t++)for(let r=0;r<32;r++)n[32*t+r]=e[64*t+2*r];t.uniforms.density.value=n,t.uniformsNeedUpdate=!0})(e.data.density)}},a.onerror=e=>{console.log(e)},console.log("worker created",a)})()},[t,a]);let{disableInteraction:l}=e,d=!1,u=!1,h=new o.Vector2(0,0),_=new o.Vector2(0,0),m=e=>{null!=e.uv&&(d=!1,u=!0,h.set(e.uv.x,1-e.uv.y))},g=e=>{u&&null!=e.uv&&(d=!0,_.set(e.uv.x,1-e.uv.y))},f=e=>{d=!1,u=!1},v=new o.Vector2(32,32);return setInterval(()=>{if(l||!d)return;let e=(new o.Vector2).subVectors(_,h).multiplyScalar(100),n=(new o.Vector2).add(_).multiply(v).round();h.set(_.x,_.y),d=!1,console.log("[event] Applying force",e,"at",n),a.postMessage({func:"updateForce",args:{loc:n,forceDelta:e}})},1e3/30),(0,r.jsx)("mesh",{...e,ref:n,material:t,onPointerUp:f,onPointerDown:m,onPointerMove:g,children:(0,r.jsx)("planeGeometry",{args:[10,8,31,31]})})}},3771:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return C}});var r=t(2729),o=t(5893),i=t(9008),s=t.n(i),a=t(9034),c=t.n(a),l=t(3419),d=t(3429);function u(){let e=(0,r._)(["\n  background-color: #d3d3d3;\n  color: #000000;\n  width: 20rem;\n  height: calc(100% - 5rem);\n  border-right: 2px solid #808080;\n  font-size: 2rem;\n  min-height: 90%;\n  position: absolute;\n"]);return u=function(){return e},e}function h(){let e=(0,r._)(['\n  font-family: "Roboto", sans-serif;\n  font-size: 1.4rem;\n  position: absolute;\n  left: 5.5rem;\n  top: 1rem;\n']);return h=function(){return e},e}let _=d.ZP.div(u()),m=d.ZP.div(h());function g(){return(0,o.jsx)(_,{children:(0,o.jsx)(m,{children:"Parameters"})})}var f=t(5029),v=t(2097),p=t(7294);function y(){let e=(0,r._)(["\n  position: absolute;\n  left: 21rem;\n  top: 6rem;\n  width: calc(100vw - 22rem);\n  height: calc(100vh - 7rem);\n"]);return y=function(){return e},e}function w(){let e=(0,r._)(["\n  background: transparent;\n"]);return w=function(){return e},e}function x(){let e=(0,r._)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  background: transparent;\n"]);return x=function(){return e},e}let b=d.ZP.div(y()),j=(0,d.ZP)(f.Xz)(w()),H=d.ZP.main(x());function C(){let e=new v.W,[n,r]=(0,p.useState)(null);return(0,p.useEffect)(()=>{let e=new Worker(t.tu(new URL(t.p+t.u(868),t.b)),{type:void 0});r(e)},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s(),{children:[(0,o.jsx)("title",{children:"Physics in the Browser for the People"}),(0,o.jsx)("meta",{name:"description",content:"PHYS"}),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsxs)(H,{children:[(0,o.jsx)("div",{className:c().navBar,children:(0,o.jsx)(l.Z,{})}),(0,o.jsx)(g,{}),(0,o.jsx)(b,{children:(0,o.jsxs)(j,{shadows:!0,camera:{position:[1,10,1]},children:[(0,o.jsx)("ambientLight",{}),(0,o.jsx)(v.H,{disableInteraction:!1,position:[0,0,0],params:e,worker:n})]})})]})]})}},9034:function(e){e.exports={main:"Home_main__nLjiQ",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",center:"Home_center__4BFgC",logo:"Home_logo__27_tb",thirteen:"Home_thirteen__cMI_k",rotate:"Home_rotate____XsI",navBar:"Home_navBar__DtDJB",content:"Home_content__Zy02X",vercelLogo:"Home_vercelLogo__dtSk9",scene:"Home_scene__X8N8q",canvas:"Home_canvas__x616u",body:"Home_body__XYSzx"}},1584:function(e){e.exports={header:"Navbar_header__VcZdC",nav:"Navbar_nav__b3Hnv","nav-btn":"Navbar_nav-btn__yDFgQ",btn:"Navbar_btn__2_IOi",theme_btn:"Navbar_theme_btn__bnQWn",logo:"Navbar_logo__E_Sw_",description:"Navbar_description__tDaFB"}}},function(e){e.O(0,[737,415,29,724,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);